<?php if($_SERVER['REQUEST_METHOD']==='POST'){ $host=$_POST['dbhost']??'127.0.0.1'; $user=$_POST['dbuser']??'root'; $pass=$_POST['dbpass']??''; $sql=file_get_contents(__DIR__.'/init_populated.sql'); $m=new mysqli($host,$user,$pass); if($m->connect_errno){ $err='Conn failed: '.$m->connect_error; } else { if($m->multi_query($sql)){ do{} while($m->more_results() && $m->next_result()); $msg='Imported'; } else $err='Import error: '.$m->error; } } ?>
<!doctype html><html><head><meta charset="utf-8"><title>Installer</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"></head><body><div class="container" style="max-width:720px;margin-top:40px"><div class="card p-3"><h4>Installer</h4><?php if(isset($err)): ?><div class="alert alert-danger"><?=htmlspecialchars($err)?></div><?php endif; ?><?php if(isset($msg)): ?><div class="alert alert-success"><?=htmlspecialchars($msg)?></div><?php endif; ?><form method="post"><div class="row"><div class="col"><input name="dbhost" class="form-control" value="127.0.0.1"></div><div class="col"><input name="dbuser" class="form-control" value="root"></div></div><div class="row mt-2"><div class="col"><input name="dbpass" class="form-control"></div></div><button class="btn btn-primary mt-3">Run Installer</button></form></div></div></body></html>